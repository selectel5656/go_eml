{{define "content"}}
<h2>Макросы</h2>
<form method="POST" action="/macros/add" enctype="multipart/form-data">
    <input type="text" name="name" placeholder="Имя макроса">
    <select name="type" id="macro-type">
        <option value="counter">Счётчик</option>
        <option value="random">Рандом</option>
        <option value="list">Список</option>
        <option value="multi">Мультимакрос</option>
    </select>
    <div id="counter-fields">
        <input type="number" name="start" placeholder="Старт">
        <input type="number" name="step" placeholder="Шаг">
    </div>
    <div id="random-fields" style="display:none">
        <input type="text" name="chars" placeholder="Символы">
        <input type="number" name="min" placeholder="Мин">
        <input type="number" name="max" placeholder="Макс">
    </div>
    <div id="list-fields" style="display:none">
        <input type="file" name="file">
        <label><input type="checkbox" name="seq">Последовательно</label>
    </div>
    <div id="multi-fields" style="display:none">
        <textarea name="expr" placeholder="Выражение"></textarea>
        <select name="encoding">
            <option value="none">Без кодирования</option>
            <option value="base64">Base64</option>
            <option value="qp">QUOTED-PRINTABLE</option>
        </select>
    </div>
    <input type="number" name="every" placeholder="Каждые N писем" value="1">
    <input type="submit" value="Добавить">
</form>
<table>
    <tr><th>Макрос</th><th>Тип</th><th>Текущее значение</th><th></th></tr>
    {{range $i, $m := .Macros}}
    <tr>
        <td>{{printf "{{$%s}}" $m.Name}}</td>
        <td>{{$m.Type}}</td>
        <td>{{$m.Last}}</td>
        <td><a href="/macros/delete?i={{$i}}" class="delete-link">удалить</a></td>
    </tr>
    {{end}}
</table>
{{end}}
